<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - RideConnect</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar dashboard-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-shield-alt"></i>
                <span>RideConnect Admin</span>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard
                </a>
                <a href="#" class="nav-link" data-section="users">
                    <i class="fas fa-users"></i>
                    Users
                </a>
                <a href="#" class="nav-link" data-section="drivers">
                    <i class="fas fa-car"></i>
                    Drivers
                </a>
                <a href="#" class="nav-link" data-section="rides">
                    <i class="fas fa-route"></i>
                    Rides
                </a>
                <a href="#" class="nav-link" data-section="payments">
                    <i class="fas fa-credit-card"></i>
                    Payments
                </a>
                <a href="#" class="nav-link" data-section="system">
                    <i class="fas fa-cogs"></i>
                    System
                </a>
                <button class="btn btn-outline" onclick="authManager.logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard -->
    <div class="dashboard-container">
        <!-- Dashboard Overview -->
        <section id="dashboard" class="dashboard-section active">
            <div class="section-header">
                <h2>System Overview</h2>
                <p>Monitor platform performance and key metrics</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalUsers">0</span>
                        <span class="stat-label">Total Users</span>
                        <span class="stat-change" id="usersChange">+0 today</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalDrivers">0</span>
                        <span class="stat-label">Active Drivers</span>
                        <span class="stat-change" id="driversOnline">0 online</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-route"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalRides">0</span>
                        <span class="stat-label">Total Rides</span>
                        <span class="stat-change" id="ridesChange">+0 today</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="totalRevenue">₹0</span>
                        <span class="stat-label">Total Revenue</span>
                        <span class="stat-change" id="revenueChange">+₹0 today</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Recent Activity</h3>
                    <div id="recentActivity" class="activity-list">
                        <!-- Recent activity will be populated here -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3>System Health</h3>
                    <div id="systemHealth" class="health-status">
                        <!-- System health will be populated here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Users Management -->
        <section id="users" class="dashboard-section">
            <div class="section-header">
                <h2>User Management</h2>
                <p>Manage riders and their accounts</p>
            </div>

            <div class="table-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="userSearch" placeholder="Search users...">
                </div>
                <select id="userFilter" class="filter-select">
                    <option value="all">All Users</option>
                    <option value="rider">Riders</option>
                    <option value="active">Active</option>
                    <option value="suspended">Suspended</option>
                </select>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Phone</th>
                            <th>Type</th>
                            <th>Joined</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTable">
                        <!-- Users will be populated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Drivers Management -->
        <section id="drivers" class="dashboard-section">
            <div class="section-header">
                <h2>Driver Management</h2>
                <p>Manage drivers, vehicles, and verification status</p>
            </div>

            <div class="table-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="driverSearch" placeholder="Search drivers...">
                </div>
                <select id="driverFilter" class="filter-select">
                    <option value="all">All Drivers</option>
                    <option value="online">Online</option>
                    <option value="offline">Offline</option>
                    <option value="suspended">Suspended</option>
                    <option value="pending_verification">Pending Verification</option>
                </select>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Driver</th>
                            <th>Phone</th>
                            <th>Vehicle</th>
                            <th>Rating</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="driversTable">
                        <!-- Drivers will be populated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Rides Management -->
        <section id="rides" class="dashboard-section">
            <div class="section-header">
                <h2>Ride Management</h2>
                <p>Monitor and manage all rides on the platform</p>
            </div>

            <div class="table-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="rideSearch" placeholder="Search rides...">
                </div>
                <select id="rideFilter" class="filter-select">
                    <option value="all">All Rides</option>
                    <option value="requested">Requested</option>
                    <option value="matched">Matched</option>
                    <option value="in_progress">In Progress</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                </select>
                <input type="date" id="rideDateFilter" class="date-filter">
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Ride ID</th>
                            <th>Rider</th>
                            <th>Driver</th>
                            <th>Route</th>
                            <th>Fare</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="ridesTable">
                        <!-- Rides will be populated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Payments Management -->
        <section id="payments" class="dashboard-section">
            <div class="section-header">
                <h2>Payment Management</h2>
                <p>Monitor transactions and driver payouts</p>
            </div>

            <div class="payment-tabs">
                <button class="tab-btn active" data-tab="transactions">Transactions</button>
                <button class="tab-btn" data-tab="payouts">Driver Payouts</button>
            </div>

            <div id="transactions" class="tab-content active">
                <div class="table-controls">
                    <select id="transactionFilter" class="filter-select">
                        <option value="all">All Transactions</option>
                        <option value="completed">Completed</option>
                        <option value="failed">Failed</option>
                        <option value="pending">Pending</option>
                    </select>
                    <input type="date" id="transactionDateFilter" class="date-filter">
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Transaction ID</th>
                                <th>Ride</th>
                                <th>Amount</th>
                                <th>Gateway</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTable">
                            <!-- Transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="payouts" class="tab-content">
                <div class="table-controls">
                    <select id="payoutFilter" class="filter-select">
                        <option value="all">All Payouts</option>
                        <option value="pending">Pending</option>
                        <option value="processed">Processed</option>
                        <option value="failed">Failed</option>
                    </select>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Driver</th>
                                <th>Period</th>
                                <th>Rides</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="payoutsTable">
                            <!-- Payouts will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- System Management -->
        <section id="system" class="dashboard-section">
            <div class="section-header">
                <h2>System Management</h2>
                <p>Monitor system health and configuration</p>
            </div>

            <div class="system-grid">
                <div class="system-card">
                    <h3>Database Status</h3>
                    <div id="databaseStatus" class="status-list">
                        <!-- Database status will be populated here -->
                    </div>
                </div>

                <div class="system-card">
                    <h3>External Services</h3>
                    <div id="servicesStatus" class="status-list">
                        <!-- Services status will be populated here -->
                    </div>
                </div>

                <div class="system-card">
                    <h3>Performance Metrics</h3>
                    <div id="performanceMetrics" class="metrics-list">
                        <!-- Performance metrics will be populated here -->
                    </div>
                </div>

                <div class="system-card">
                    <h3>System Actions</h3>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="adminPanel.seedDatabase()">
                            <i class="fas fa-database"></i>
                            Seed Test Data
                        </button>
                        <button class="btn btn-warning" onclick="adminPanel.clearCache()">
                            <i class="fas fa-trash"></i>
                            Clear Cache
                        </button>
                        <button class="btn btn-info" onclick="adminPanel.exportData()">
                            <i class="fas fa-download"></i>
                            Export Data
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- User Details Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>User Details</h2>
                <span class="close" onclick="closeModal('userModal')">&times;</span>
            </div>
            <div id="userDetails" class="user-details">
                <!-- User details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Driver Details Modal -->
    <div id="driverModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Driver Details</h2>
                <span class="close" onclick="closeModal('driverModal')">&times;</span>
            </div>
            <div id="driverDetails" class="driver-details">
                <!-- Driver details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Ride Details Modal -->
    <div id="rideModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Ride Details</h2>
                <span class="close" onclick="closeModal('rideModal')">&times;</span>
            </div>
            <div id="rideDetails" class="ride-details">
                <!-- Ride details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Please wait...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>